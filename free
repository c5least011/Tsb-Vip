local p = game.Players.LocalPlayer
local running = false
local HttpService = game:GetService("HttpService")
local keyURL = "https://raw.githubusercontent.com/c5least011/Tsb-Vip/refs/heads/main/key"

local function getKey()
    local success, response = pcall(function()
        return HttpService:GetAsync(keyURL)
    end)
    return success and response or nil
end

local function getRandomPlayer()
    local players = {}
    for _, v in pairs(game.Players:GetPlayers()) do
        if v ~= p and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
            table.insert(players, v)
        end
    end
    return #players > 0 and players[math.random(1, #players)] or nil
end

local function followPlayers()
    running = true
    while running do
        local target = getRandomPlayer()
        if not target then task.wait(1) continue end

        repeat
            if not running then return end
            if target.Character and target.Character:FindFirstChild("HumanoidRootPart") and p.Character then
                p.Character:WaitForChild("HumanoidRootPart").CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
            else
                break
            end
            task.wait(0.001)
        until not target.Character or not target.Character.Parent
    end
end

local function followDummy()
    running = true
    local d repeat d = game.Workspace.Live:FindFirstChild("Weakest Dummy") task.wait() until d
    local t = d:WaitForChild("Torso")

    while running and d and d.Pa